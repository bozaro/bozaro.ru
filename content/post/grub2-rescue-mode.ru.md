---
date: 2010-01-31
title: Аварийная загрузка Grub2 (rescue mode)
slug: grub2-rescue-mode
tags:
 - linux
 - grub2
categories:
 - Linux
menu: main
---

В один прекрасный день я удалил партицию со старыми линухами (sda5) и после перезагрузки вместо окошка выбора операционки получил сообщение об ошибке. Ошибка была вызвана тем, что Grub2 был на партиции sda7, которая теперь стала sda6.
<!--more-->
К счастью, Grub2 отображает консоль через которую можно поправить ситуацию. Алгоритм восстановления загручика сводится к следующим действиям:

 * Ищем партицию, где установлена система и загрузчик (у меня они совпадают):

    ```
ls (hd0,6)/
    ```
 * Когда партиция найдена, нужно задать путь к модулям Grub2:

    ```
set prefix=(hd0,6)/boot/grub
    ```
 * А так же путь к файловой системе с образом ядра:

    ```
set root=(hd0,6)
    ```
 * После этого нужно загрузить модуль загрузки Linux-а:

    ```
insmod /boot/grub/linux.mod
    ```

    С этого момента жить становится легче, так как начинают работать дополнительные консольные плюшки, к примеру — табуляция.
 * Указываем ядро и загружаемся:

    ```
linux /vmlinuz root=/dev/sda6 ro
initrd /initrd.img
boot
    ```
 * После попадания в Linux надо восстановить загрузчик. Для этого в Ubuntu можно воспользоваться командой:

    ```
dpkg-reconfigure grub-pc
    ```

Ссылки по теме:

 * https://help.ubuntu.com/community/Grub2